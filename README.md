# 简易文件同步系统

一个极简的内网文件同步系统，基于 Node.js 构建，支持批量上传下载和断点续传。

## 功能特性

- ✅ **批量上传**: 支持同时上传多个文件
- ✅ **文件夹上传**: 支持上传整个文件夹，自动保留目录结构
- ✅ **断点续传**: 大文件（>5MB）自动分片上传，支持断点续传
- ✅ **文件浏览**: 可视化文件列表和目录结构
- ✅ **批量下载**: 支持单个文件下载或多个文件打包下载
- ✅ **文件删除**: 支持单个或批量删除文件/文件夹
- ✅ **拖拽上传**: 支持拖拽文件或文件夹到浏览器上传
- ✅ **极简设计**: 无数据库、无认证，专为内网使用设计

## 快速开始

### 安装依赖

```bash
pnpm install
```

### 配置

编辑 `config.json` 文件：

```json
{
  "port": 3000,              // 服务器端口
  "storagePath": "./storage", // 文件存储路径
  "maxFileSize": 1073741824,  // 最大文件大小（1GB）
  "chunkSize": 5242880,       // 分片大小（5MB）
  "tempPath": "./temp"        // 临时文件路径
}
```

### 启动服务器

```bash
pnpm start
```

服务器将运行在 `http://localhost:3000`

### 开发模式

```bash
pnpm run dev
```

## 使用说明

1. **上传文件**
   - 点击"上传文件"按钮选择单个或多个文件
   - 点击"上传文件夹"按钮选择整个文件夹（自动保留目录结构）
   - 或直接拖拽文件/文件夹到浏览器窗口
   - 大于5MB的文件会自动启用断点续传

2. **浏览文件**
   - 点击文件夹进入子目录
   - 使用顶部面包屑导航返回上级目录

3. **下载文件**
   - 双击文件直接下载
   - 勾选多个文件，点击"下载选中"打包下载

4. **删除文件**
   - 勾选要删除的文件/文件夹
   - 点击"删除选中"按钮

## 项目结构

```
file-system/
├── server.js           # 后端服务器（约250行）
├── config.json         # 配置文件
├── package.json
├── public/             # 前端资源
│   ├── index.html      # Web界面
│   ├── style.css       # 样式文件
│   └── app.js          # 前端逻辑
├── storage/            # 文件存储目录
└── temp/               # 临时文件目录
```

## API 接口

- `GET /api/files?path=xxx` - 获取文件列表
- `POST /api/upload` - 简单上传（小文件）
- `POST /api/upload-chunk` - 分片上传
- `POST /api/merge-chunks` - 合并分片
- `GET /api/download/:path` - 下载单个文件
- `POST /api/download-multiple` - 批量下载
- `DELETE /api/delete` - 删除文件

## 注意事项

⚠️ **本系统专为内网使用设计，未包含任何认证机制，请勿暴露到公网！**

## 技术栈

- **后端**: Express.js
- **文件上传**: Multer
- **文件压缩**: Archiver
- **前端**: 原生 HTML/CSS/JavaScript

## License

MIT
